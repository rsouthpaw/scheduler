{"version":3,"sources":["login/Login.js","api/Api.js","edit/EditFile.js","revisions/FileRevisions.js","home/Home.js","App.js","serviceWorker.js","index.js"],"names":["Login","props","state","email","password","config","headers","this","api","console","log","axios","post","then","response","onLogin","data","error","classes","Grid","container","component","className","root","CssBaseline","item","xs","sm","md","image","Paper","elevation","square","loginArea","paper","Avatar","avatar","Typography","variant","TextField","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","onChange","e","setState","target","value","type","Button","color","submit","onClick","login","bind","React","Component","withStyles","theme","height","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition","spacing","display","flexDirection","alignItems","backgroundColor","palette","secondary","main","form","width","marginTop","background","files","add","body","file_id","expiry","department","security","getHeader","get","download","fetch","Headers","window","localStorage","getItem","resp","blob","url","URL","createObjectURL","a","document","createElement","style","href","appendChild","click","revokeObjectURL","catch","err","update","pullData","delete","EditFile","fileData","handleClose","Api","fileId","success","json","fileUpdated","Dialog","open","onEnter","pullFileData","onClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","multiline","rowsMax","textField","helperText","DialogActions","updateFile","FileRevisions","List","dense","revisions","map","revision","ListItem","key","button","downloadFile","ListItemText","primary","Date","ts_revised","toLocaleDateString","Home","openAddDialogOpen","savedFiles","filteredFiles","fileIds","fileName","showRevisionDialog","description","editFile","selectedRevisions","fetchDocuments","addDialogOpen","clearFileState","onLogout","length","serverId","toISOString","closeAddDialog","filterDocuments","i","created_at_readable","created_at","toDateString","expiry_readable","selectedFileId","closeEditFile","val","filtered","JSON","stringify","toLowerCase","indexOf","push","ts","newRevision","slice","Fragment","AppBar","position","Toolbar","IconButton","edge","menuButton","aria-label","title","handleLogout","heroContent","Container","maxWidth","align","gutterBottom","paragraph","heroButtons","justify","openAddDialog","serachBar","InputBase","inputSearchBar","searchTextChanged","placeholder","inputProps","cardGrid","file","Card","card","CardMedia","cardMedia","CardContent","cardContent","CardActions","current_version_file_id","showRevisions","deleteFile","footer","defaultValue","InputLabelProps","shrink","dropdown","InputLabel","htmlFor","Select","departmentChanged","MenuItem","ref","pond","allowMultiple","server","process","auth","onupdatefiles","fileItems","saveFile","closeRevisions","icon","marginRight","padding","paddingTop","paddingBottom","flexGrow","marginLeft","flex","marginBottom","App","loggedIn","getLoginStatus","apiToken","setItem","token","removeItem","path","render","logoutHandler","loginHandler","Boolean","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.add923d7.chunk.js","sourcesContent":["import React from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  root: {\n    height: \"100vh\"\n  },\n  image: {\n    backgroundImage:\n      \"url(https://images.unsplash.com/photo-1457694587812-e8bf29a43845?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1351&q=80)\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\"\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  loginArea: {\n    background: \"#fff\"\n  }\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n  }\n  login() {\n    let config = {\n      headers: {\n        \"Authorization\": this.props.api\n      }\n    };\n    console.log(this.state.email, this.state.password, this.props.api)\n    axios\n      .post(\n        \"/api/v1/login\",\n        {\n          email: this.state.email,\n          password: this.state.password\n        },\n        config\n      )\n      .then(\n        response => {\n          console.log(response);\n          this.props.onLogin(response.data)\n        },\n        error => {\n          console.log(error);\n        }\n      );\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <Grid container component=\"main\" className={classes.root}>\n        <CssBaseline />\n        <Grid item xs={false} sm={4} md={7} className={classes.image} />\n        <Grid\n          item\n          xs={12}\n          sm={8}\n          md={5}\n          component={Paper}\n          elevation={6}\n          square\n          className={classes.loginArea}\n        >\n          <div className={classes.paper}>\n            <Avatar className={classes.avatar}>\n              <LockOutlinedIcon />\n            </Avatar>\n            <Typography component=\"h1\" variant=\"h5\">\n              Sign in\n            </Typography>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email Address\"\n              name=\"email\"\n              autoComplete=\"email\"\n              autoFocus\n              onChange={e => {\n                this.setState({ email: e.target.value });\n              }}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              onChange={e => {\n                this.setState({ password: e.target.value });\n              }}\n            />\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n              onClick={this.login.bind(this)}\n            >\n              Sign In\n            </Button>\n          </div>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Login);","import axios from \"axios\";\n\nconst LSK_KEY = \"auth\";\n\nconst files = {\n  /** api for adding a new file */\n  add: body =>\n    axios.post(\n      \"/api/v1/files/add\",\n      {\n        name: body.name,\n        file_id: body.file_id,\n        expiry: body.expiry,\n        department: body.department\n      },\n      security.getHeader()\n    ),\n\n  /** api for fetching all files of a user */\n  get: () => axios.get(\"/api/v1/files/get_all\", security.getHeader()),\n\n  /** api for downloading a file */\n  download: (id, name) =>\n    fetch(\"/api/v1/files/fetch/\" + id, {\n      headers: new Headers({\n        \"x-api-key\": window.localStorage.getItem(LSK_KEY)\n      })\n    })\n      .then(resp => resp.blob())\n      .then(blob => {\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.style.display = \"none\";\n        a.href = url;\n        if (name == null || name === \"\") {\n          a.download = id + \".txt\";\n        } else {\n          a.download = name + \".txt\";\n        }\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n      })\n      .catch(err => console.log(err)),\n\n  /** api for updating a file and creating a new revision of that file */\n  update: body =>\n    axios.post(\n      \"/api/v1/files/update\",\n      {\n        file_id: body.file_id,\n        data: body.data\n      },\n      security.getHeader()\n    ),\n  pullData: id => axios.get(\"/api/v1/files/pull/\" + id, security.getHeader()),\n  delete: body =>\n    axios.post(\n      \"/api/v1/files/delete\",\n      { file_id: body.file_id },\n      security.getHeader()\n    )\n};\n\nconst security = {\n  getHeader: () => {\n    return {\n      headers: {\n        \"x-api-key\": window.localStorage.getItem(LSK_KEY)\n      }\n    };\n  }\n};\n\nexport default {\n  files\n};\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Api from \"../api/Api\";\n\nconst styles = theme => ({\n  textField: {}\n});\n\nclass EditFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileData: \"\",\n    };\n  }\n  handleClose() {\n    this.props.handleClose();\n  }\n  pullFileData() {\n    Api.files.pullData(this.props.fileId).then(\n      response => {\n        console.log(response);\n        if (response.data.success && response.data.data != null) {\n          this.setState({ fileData: response.data.data });\n        } else {\n          // handle error\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n  updateFile() {\n    var json = {};\n    json.data = this.state.fileData;\n    json.file_id = this.props.fileId;\n    Api.files.update(json).then(\n      response => {\n        console.log(response);\n        if (response.data.success) {\n          this.props.fileUpdated();\n          // show snackbar\n        } else {\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n  render() {\n    const { classes } = this.props;\n    return (\n      <div>\n        <Dialog\n          open={this.props.open}\n          onEnter={this.pullFileData.bind(this)}\n          onClose={this.handleClose.bind(this)}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">Edit File</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Create new revision of this file. Edit file and click on update to\n              save new revision for file.\n            </DialogContentText>\n            <TextField\n              id=\"outlined-multiline-flexible\"\n              label=\"Multiline\"\n              value={this.state.fileData}\n              multiline\n              rowsMax=\"16\"\n              fullWidth\n              onChange={e => this.setState({ fileData : e.target.value })}\n              className={classes.textField}\n              margin=\"normal\"\n              helperText=\"File Contents\"\n              variant=\"outlined\"\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleClose.bind(this)} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={this.updateFile.bind(this)} color=\"primary\">\n              Update\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(EditFile);\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Button from \"@material-ui/core/Button\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Api from \"../api/Api\";\n\nconst styles = theme => ({\n  textField: {}\n});\n\nclass FileRevisions extends React.Component {\n  downloadFile(fileId) {\n    Api.files.download(fileId);\n  }\n  handleClose() {\n    this.props.handleClose();\n  }\n  render() {\n    console.log(this.props);\n    return (\n      <div>\n        <Dialog\n          open={this.props.open}\n          onClose={this.handleClose.bind(this)}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">File Revisions</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              You can see all the revisions of a file here. Click on any one of\n              them to download.\n            </DialogContentText>\n            <List dense={true}>\n              {this.props.revisions.map(revision => (\n                <ListItem key={revision.file_id} button onClick={this.downloadFile.bind(this, revision.file_id)}>\n                  <ListItemText\n                    primary={\n                      \"Date: \" +\n                      new Date(revision.ts_revised).toLocaleDateString()\n                    }\n                    secondary=\"Click to download\"\n                  />\n                </ListItem>\n              ))}\n            </List>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleClose.bind(this)} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(FileRevisions);\n\n/*\n              {this.props.revisions.map(\n                <ListItem>\n                  <ListItemText\n                    primary=\"Single-line item\"\n                    secondary=\"ala\"\n                  />\n                </ListItem>,\n              )}\n*/\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Button from \"@material-ui/core/Button\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport HistoryIcon from \"@material-ui/icons/History\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { FilePond } from \"react-filepond\";\nimport \"filepond/dist/filepond.min.css\";\nimport Api from \"../api/Api\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Paper from \"@material-ui/core/Paper\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport EditFile from \"../edit/EditFile\";\nimport FileRevisions from \"../revisions/FileRevisions\";\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing(2)\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6)\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4)\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8)\n  },\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  cardMedia: {\n    paddingTop: \"56.25%\"\n  },\n  cardContent: { flexGrow: 1 },\n  footer: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(6)\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1\n  },\n  textField: {\n    margin: \"6px\"\n  },\n  inputSearchBar: {\n    marginLeft: theme.spacing(1),\n    flex: 1\n  },\n  serachBar: {\n    padding: \"6px 8px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    marginTop: \"20px\",\n    width: 370,\n    background: \"#fff\"\n  },\n  dropdown: { marginLeft: \"6px\", marginBottom: \"10px\", paddingTop: \"6px\" }\n});\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openAddDialogOpen: false,\n      files: [],\n      savedFiles: [],\n      filteredFiles: [],\n      fileIds: [],\n      fileName: \"\",\n      department: \"\",\n      showRevisionDialog: false,\n      expiry: new Date(\"2020-12-25T10:30\"),\n      description: \"\",\n      editFile: false,\n      selectedRevisions: []\n    };\n  }\n  componentDidMount() {\n    this.fetchDocuments();\n  }\n  openAddDialog() {\n    this.setState({ addDialogOpen: true });\n  }\n  closeAddDialog() {\n    this.clearFileState();\n    this.setState({ addDialogOpen: false });\n  }\n  handleLogout() {\n    this.props.onLogout();\n  }\n  saveFile() {\n    if (this.state.files.length === 0) {\n      // Show error and return\n      return;\n    }\n    if (this.state.fileName === \"\") {\n      // Show error and return\n      return;\n    }\n    var json = {};\n    json.file_id = this.state.files[0].serverId;\n    json.name = this.state.fileName;\n    json.expiry = new Date(this.state.expiry).toISOString();\n    json.department = this.state.department;\n    console.log(json);\n    Api.files.add(json).then(\n      response => {\n        console.log(response);\n        if (response.data.success) {\n          this.closeAddDialog();\n          this.fetchDocuments();\n          // show snackbar\n        } else {\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n  clearFileState() {\n    this.setState({ files: [] });\n  }\n  fetchDocuments() {\n    Api.files.get().then(\n      response => {\n        console.log(response);\n        if (response.data.success) {\n          if (response.data.files != null) {\n            this.setState({\n              savedFiles: this.filterDocuments(response.data.files)\n            });\n            this.setState({\n              filteredFiles: this.state.savedFiles\n            });\n          } else {\n            this.setState({\n              savedFiles: []\n            });\n          }\n          console.log(this.state.savedFiles);\n          // update array\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n  downloadFile(fileId, name) {\n    Api.files.download(fileId, name);\n  }\n  filterDocuments(files) {\n    for (var i = 0; i < files.length; i++) {\n      files[i].created_at_readable = new Date(\n        files[i].created_at\n      ).toDateString();\n      files[i].expiry_readable = new Date(files[i].expiry).toDateString();\n    }\n    return files;\n  }\n  departmentChanged(e) {\n    console.log(this.state.department);\n    this.setState({ department: e.target.value });\n    console.log(this.state.department);\n  }\n  editFile(fileId) {\n    this.setState({ editFile: true, selectedFileId: fileId });\n  }\n  deleteFile(fileId) {\n    var json = {};\n    json.file_id = fileId;\n    Api.files.delete(json).then(\n      response => {\n        console.log(response);\n        if (response.data.success) {\n          this.fetchDocuments();\n          // update array\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n  closeEditFile() {\n    this.setState({ editFile: false });\n  }\n  fileUpdated() {\n    this.closeEditFile();\n    this.fetchDocuments();\n  }\n  viewRevisions() {}\n  searchTextChanged(e) {\n    if (e.target.value == null || e.target.value === \"\") {\n      this.setState({\n        filteredFiles: this.state.savedFiles\n      });\n      return;\n    }\n    var val = e.target.value;\n    var files = this.state.savedFiles;\n    var filtered = [];\n    for (var i = 0; i < files.length; i++) {\n      if (\n        JSON.stringify(files[i])\n          .toLowerCase()\n          .indexOf(val) !== -1\n      ) {\n        filtered.push(files[i]);\n      }\n    }\n    this.setState({ filteredFiles: filtered });\n  }\n  showRevisions(revisions, fileId, ts) {\n    console.log(revisions);\n    if (revisions == null || revisions.length === 0) {\n      var newRevision = [];\n    } else {\n      var newRevision = revisions.slice();\n    }\n    var json = [];\n    json.file_id = fileId;\n    json.ts_revised = ts;\n    newRevision.push(json);\n    console.log(newRevision);\n    this.setState({\n      showRevisionDialog: true,\n      selectedRevisions: newRevision\n    });\n  }\n  closeRevisions() {\n    this.setState({ showRevisionDialog: false });\n  }\n  render() {\n    const { classes } = this.props;\n    return (\n      <div>\n        <React.Fragment>\n          <CssBaseline />\n          <AppBar position=\"static\">\n            <Toolbar>\n              <IconButton\n                edge=\"start\"\n                className={classes.menuButton}\n                color=\"inherit\"\n                aria-label=\"menu\"\n              >\n                <DescriptionIcon />\n              </IconButton>\n              <Typography variant=\"h6\" className={classes.title}>\n                Document Manager\n              </Typography>\n              <Button color=\"inherit\" onClick={this.handleLogout.bind(this)}>\n                Logout\n              </Button>\n            </Toolbar>\n          </AppBar>\n          <main>\n            {/* Hero unit */}\n            <div className={classes.heroContent}>\n              <Container maxWidth=\"sm\">\n                <Typography\n                  component=\"h1\"\n                  variant=\"h2\"\n                  align=\"center\"\n                  color=\"textPrimary\"\n                  gutterBottom\n                >\n                  Documents\n                </Typography>\n                <Typography\n                  variant=\"h5\"\n                  align=\"center\"\n                  color=\"textSecondary\"\n                  paragraph\n                >\n                  Add or remove documents here\n                </Typography>\n                <div className={classes.heroButtons}>\n                  <Grid container spacing={2} justify=\"center\">\n                    <Grid item>\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={this.openAddDialog.bind(this)}\n                      >\n                        Add Document\n                      </Button>\n                    </Grid>\n                  </Grid>\n                  <Grid container spacing={2} justify=\"center\">\n                    <Grid item>\n                      <Paper className={classes.serachBar}>\n                        <SearchIcon />\n                        <InputBase\n                          className={classes.inputSearchBar}\n                          onChange={e => this.searchTextChanged(e)}\n                          placeholder=\"Search Documents by Name, Description etc\"\n                          inputProps={{ \"aria-label\": \"search\" }}\n                        />\n                      </Paper>\n                    </Grid>\n                  </Grid>\n                </div>\n              </Container>\n            </div>\n            <Container className={classes.cardGrid} maxWidth=\"md\">\n              {/* End hero unit */}\n              <Grid container spacing={4}>\n                {this.state.filteredFiles.map(file => (\n                  <Grid item key={file.id} xs={12} sm={6} md={4}>\n                    <Card className={classes.card}>\n                      <CardMedia\n                        className={classes.cardMedia}\n                        image=\"https://source.unsplash.com/random\"\n                        title=\"Document\"\n                      />\n                      <CardContent className={classes.cardContent}>\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                          {file.name}\n                        </Typography>\n                        <Typography>\n                          Created On : {file.created_at_readable} <br />\n                          Expires On : {file.expiry_readable}\n                        </Typography>\n                      </CardContent>\n                      <CardActions>\n                        <IconButton\n                          edge=\"start\"\n                          className={classes.menuButton}\n                          color=\"inherit\"\n                          aria-label=\"menu\"\n                          onClick={this.downloadFile.bind(\n                            this,\n                            file.current_version_file_id,\n                            file.name\n                          )}\n                        >\n                          <GetAppIcon />\n                        </IconButton>\n                        <IconButton\n                          edge=\"start\"\n                          className={classes.menuButton}\n                          color=\"inherit\"\n                          aria-label=\"menu\"\n                          onClick={this.showRevisions.bind(\n                            this,\n                            file.revisions,\n                            file.id,\n                            file.created_at\n                          )}\n                        >\n                          <HistoryIcon />\n                        </IconButton>\n                        <IconButton\n                          edge=\"start\"\n                          className={classes.menuButton}\n                          color=\"inherit\"\n                          aria-label=\"menu\"\n                          onClick={this.editFile.bind(\n                            this,\n                            file.current_version_file_id\n                          )}\n                        >\n                          <EditIcon />\n                        </IconButton>\n                        <IconButton\n                          edge=\"start\"\n                          className={classes.menuButton}\n                          color=\"inherit\"\n                          aria-label=\"menu\"\n                          onClick={this.deleteFile.bind(this, file.id)}\n                        >\n                          <DeleteIcon />\n                        </IconButton>\n                      </CardActions>\n                    </Card>\n                  </Grid>\n                ))}\n              </Grid>\n            </Container>\n          </main>\n          {/* Footer */}\n          <footer className={classes.footer}>\n            <Typography variant=\"h6\" align=\"center\" gutterBottom>\n              Saransh Miglani\n            </Typography>\n            <Typography\n              variant=\"subtitle1\"\n              align=\"center\"\n              color=\"textSecondary\"\n              component=\"p\"\n            >\n              saranshmiglani@gmail.com\n            </Typography>\n          </footer>\n          {/* End footer */}\n        </React.Fragment>\n        <Dialog\n          open={this.state.addDialogOpen}\n          onClose={this.closeAddDialog.bind(this)}\n        >\n          <DialogTitle id=\"responsive-dialog-title\">\n            {\"Add Document\"}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Please upload your file. Enter name and expiration date for file.\n              Click on save to store your file\n            </DialogContentText>\n            <TextField\n              id=\"name-file\"\n              label=\"Name*\"\n              fullWidth\n              onChange={e => {\n                this.setState({ fileName: e.target.value });\n              }}\n              className={classes.textField}\n              margin=\"normal\"\n            />\n            <TextField\n              id=\"description-file\"\n              label=\"Description\"\n              fullWidth\n              onChange={e => {\n                this.setState({ description: e.target.value });\n              }}\n              className={classes.textField}\n              margin=\"normal\"\n            />\n            <TextField\n              id=\"datetime-local\"\n              label=\"Expiry\"\n              type=\"datetime-local\"\n              defaultValue=\"2019-12-25T10:30\"\n              onChange={e =>\n                this.setState({ expiry: new Date(e.target.value) })\n              }\n              fullWidth\n              className={classes.textField}\n              InputLabelProps={{\n                shrink: true\n              }}\n            />\n            <div className={classes.dropdown}>\n              <InputLabel htmlFor=\"age-simple\">Department</InputLabel>\n              <Select\n                className={classes.dropdown}\n                value={this.state.department}\n                fullWidth\n                onChange={this.departmentChanged.bind(this)}\n                inputProps={{\n                  name: \"age\",\n                  id: \"age-simple\"\n                }}\n              >\n                <MenuItem value=\"\">\n                  <em>None</em>\n                </MenuItem>\n                <MenuItem value=\"engineering\">Engineering</MenuItem>\n                <MenuItem value=\"marketing\">Marketing</MenuItem>\n                <MenuItem value=\"sales\">Sales</MenuItem>\n              </Select>\n            </div>\n            <FilePond\n              ref={ref => (this.pond = ref)}\n              files={this.state.files}\n              allowMultiple={false}\n              server={{\n                url: \"/api/v1/files/upload\",\n                process: {\n                  headers: {\n                    \"x-api-key\": window.localStorage.getItem(this.props.auth)\n                  }\n                }\n              }}\n              onupdatefiles={fileItems => {\n                console.log(fileItems);\n                var files = [];\n                for (var i = 0; i < fileItems.length; i++) {\n                  files.push(fileItems[i]);\n                }\n                this.setState({\n                  files: files\n                });\n              }}\n            ></FilePond>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.closeAddDialog.bind(this)} color=\"primary\">\n              Cancel\n            </Button>\n            <Button\n              onClick={this.closeAddDialog.bind(this)}\n              color=\"primary\"\n              autoFocus\n              onClick={this.saveFile.bind(this)}\n            >\n              Save\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <EditFile\n          open={this.state.editFile}\n          fileId={this.state.selectedFileId}\n          handleClose={this.closeEditFile.bind(this)}\n          fileUpdated={this.fileUpdated.bind(this)}\n        />\n        <FileRevisions\n          open={this.state.showRevisionDialog}\n          handleClose={this.closeRevisions.bind(this)}\n          revisions={this.state.selectedRevisions}\n        />\n      </div>\n    );\n  }\n}\n\nHome.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Home);\n","import React from \"react\";\nimport { Route, HashRouter } from \"react-router-dom\";\nimport Login from \"./login/Login\";\nimport Home from \"./home/Home\";\n\nconst API_KEY = \"vXBk4iN9JPNjjpNKWnBmlgjqjScoX3GQ\";\nconst AUTH_KEY = \"auth\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedIn: this.getLoginStatus()\n    };\n  }\n  getLoginStatus() {\n    var apiToken = window.localStorage.getItem(AUTH_KEY);\n    if (apiToken !== null && apiToken !== \"\") {\n      //logged in\n      return true;\n    } else {\n      //logged out\n      return false;\n    }\n  }\n  loginHandler(response) {\n    window.localStorage.setItem(AUTH_KEY, response.token);\n    this.setState({ loggedIn: true });\n  }\n  logoutHandler() {\n    window.localStorage.removeItem(AUTH_KEY);\n    this.setState({ loggedIn: false });\n  }\n  render() {\n    return (\n      <HashRouter>\n        <div className=\"content\">\n          {this.state.loggedIn ? (\n            <Route\n              path=\"/\"\n              render={props => (\n                <Home onLogout={this.logoutHandler.bind(this)} auth={AUTH_KEY} {...props} />\n              )}\n            />\n          ) : (\n            <Route\n              path=\"/\"\n              render={props => (\n                <Login\n                  api={API_KEY}\n                  onLogin={this.loginHandler.bind(this)}\n                  {...props}\n                />\n              )}\n            />\n          )}\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nexport default App;\n\n/*\n<div className=\"App\">\n        <header className=\"App-header\">\n        </header>\n      </div>\n*/\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}